schema: '2.0'
stages:
  download_data:
    cmd: wget https://git.io/vXTVC -O data/raw/dataset.csv
    outs:
    - path: data/raw/dataset.csv
      md5: 1a53f0e394e74914659007cc5f153b9f
      size: 1850
  sampling:
    cmd: poetry run python -m chapter01.sampling data/raw/dataset.csv data/interim/trace.pickle
      data/interim/model.pickle --samples=4000 --sample_tune=1000
    deps:
    - path: chapter01/sampling.py
      md5: f73a55e8db84b3c974d3b8e75feeb435
      size: 2310
    - path: data/raw/dataset.csv
      md5: 1a53f0e394e74914659007cc5f153b9f
      size: 1850
    outs:
    - path: data/interim/model.pickle
      md5: 860d5fd3645786f23e8aab6fdda0b562
      size: 767672
    - path: data/interim/trace.pickle
      md5: f2ecb2c7ab7d3b33813f9b66c34e3006
      size: 2666820
  analysis:
    cmd: poetry run python -m chapter01.analysis data/raw/dataset.csv data/interim/trace.pickle
      data/interim/model.pickle reports/figures/chapter01/ data/processed/trace_summary.csv
    deps:
    - path: chapter01/analysis.py
      md5: 5b22b3adcf612fd80b62ef70b0edbf3c
      size: 5215
    - path: data/interim/model.pickle
      md5: 860d5fd3645786f23e8aab6fdda0b562
      size: 767672
    - path: data/interim/trace.pickle
      md5: f2ecb2c7ab7d3b33813f9b66c34e3006
      size: 2666820
    - path: data/raw/dataset.csv
      md5: 1a53f0e394e74914659007cc5f153b9f
      size: 1850
    outs:
    - path: data/processed/trace_summary.csv
      md5: 4367ba715e0d003c9b4a022b1fffbca5
      size: 255
    - path: reports/figures/chapter01/
      md5: 89298950c44250aecaaac97e228bfa35.dir
      size: 248762
      nfiles: 4
  chap01_download_data:
    cmd: wget https://git.io/vXTVC -O data/raw/dataset.csv
    outs:
    - path: data/raw/dataset.csv
      md5: 1a53f0e394e74914659007cc5f153b9f
      size: 1850
  chap02_ab_testing:
    cmd: poetry run python -m src.chapter02.ab_testing
    deps:
    - path: src/chapter02/ab_testing.py
      md5: c32e899e7f79adb2cb0db7d70e967de9
      size: 1574
    outs:
    - path: reports/figures/chapter02/
      md5: e75ad97d154ce1e8bfca1a108c90775b.dir
      size: 21499
      nfiles: 1
  chap01_sampling:
    cmd: poetry run python -m src.chapter01.sampling data/raw/dataset.csv data/interim/trace_and_model.pickle
      --samples=4000 --sample_tune=1000
    deps:
    - path: data/raw/dataset.csv
      md5: 1a53f0e394e74914659007cc5f153b9f
      size: 1850
    - path: src/chapter01/sampling.py
      md5: dfcc1fb3b22f3e0c9bc828bf1817dda7
      size: 2158
    - path: src/utils.py
      md5: 08908d6b0cc85d9d1565106989f226c5
      size: 1331
    outs:
    - path: data/interim/trace_and_model.pickle
      md5: a44263e776fa7d2883db9d4266e8c3ea
      size: 2667532
  chap01_analysis:
    cmd: poetry run python -m src.chapter01.analysis data/raw/dataset.csv data/interim/trace_and_model.pickle
      reports/figures/chapter01/ data/processed/trace_summary.csv
    deps:
    - path: data/interim/trace_and_model.pickle
      md5: a44263e776fa7d2883db9d4266e8c3ea
      size: 2667532
    - path: data/raw/dataset.csv
      md5: 1a53f0e394e74914659007cc5f153b9f
      size: 1850
    - path: src/chapter01/analysis.py
      md5: b3f9aa85f5e8fb2fb2fc21f59c1a8dac
      size: 4704
    - path: src/utils.py
      md5: 08908d6b0cc85d9d1565106989f226c5
      size: 1331
    outs:
    - path: data/processed/trace_summary.csv
      md5: 9f9195f6a76eacf81ff163786bb0d54d
      size: 255
    - path: reports/figures/chapter01/
      md5: e12f91f79a67e4dd7c92af4df17cfa55.dir
      size: 258738
      nfiles: 4
  chap02_one_bernoulli:
    cmd: poetry run python -m src.chapter02.one_bernoulli --figure_dir reports/figures/chapter02/one/
    deps:
    - path: src/chapter02/one_bernoulli.py
      md5: 10f887169081cf88af90da4264f22234
      size: 1887
    - path: src/utils.py
      md5: 08908d6b0cc85d9d1565106989f226c5
      size: 1331
    outs:
    - path: reports/figures/chapter02/one/bernoulli.png
      md5: 6b9aa8edc55cb54b67f8f50d35a9e145
      size: 21495
  chap02_two_bernoulli:
    cmd: poetry run python -m src.chapter02.two_bernoulli --figure_dir reports/figures/chapter02/two/
    deps:
    - path: src/chapter02/two_bernoulli.py
      md5: 15f756da5c0dc81a27c59f282dd4c3e3
      size: 4061
    - path: src/utils.py
      md5: 35786e8e469996ec09b518de1d2c4e72
      size: 1019
    outs:
    - path: reports/figures/chapter02/two/bernoulli.png
      md5: 40fb545aad83f6108da042c9170cb348
      size: 67424
  chap02_two_bernoulli_sampling:
    cmd: poetry run python -m src.chapter02.two_bernoulli_sampling --model_output_filepath
      models/chapter02/two_bernoulli.pickle --theta_filepath models/chapter02/two_bernoulli_theta.npz
    deps:
    - path: src/chapter02/two_bernoulli_sampling.py
      md5: 4fd90b0d9980489944c94d9d50fffe60
      size: 3891
    - path: src/utils.py
      md5: 08908d6b0cc85d9d1565106989f226c5
      size: 1331
    outs:
    - path: models/chapter02/two_bernoulli.pickle
      md5: 36efba814dc441ade62b5e8b23466b30
      size: 5756836
    - path: models/chapter02/two_bernoulli_theta.npz
      md5: 02043878c828e61f52d285aa06abef6d
      size: 19546
  chap02_two_bernoulli_analysis:
    cmd: poetry run python -m src.chapter02.two_bernoulli_analysis models/chapter02/two_bernoulli.pickle
      models/chapter02/two_bernoulli_theta.npz --figure_dir reports/figures/chapter02/two/
    deps:
    - path: models/chapter02/two_bernoulli.pickle
      md5: 36efba814dc441ade62b5e8b23466b30
      size: 5756836
    - path: models/chapter02/two_bernoulli_theta.npz
      md5: 02043878c828e61f52d285aa06abef6d
      size: 19546
    - path: src/chapter02/two_bernoulli_analysis.py
      md5: 7bc76956a5df3e5c759edb4fced796a0
      size: 8598
    - path: src/utils.py
      md5: 08908d6b0cc85d9d1565106989f226c5
      size: 1331
    outs:
    - path: reports/figures/chapter02/two/bernoulli.png
      md5: ca1d167fdc34970131f33969100e6bc5
      size: 152544
    - path: reports/figures/chapter02/two/trace.png
      md5: 74fd4d2d2a133ecebfa64961589e106f
      size: 177482
  chap02_two_bernoulli_sampling@2:
    cmd: poetry run python -m src.chapter02.two_bernoulli_sampling --model_output_filepath
      models/chapter02/2/two_bernoulli.pickle --theta_filepath models/chapter02/2/two_bernoulli_theta.npz
    deps:
    - path: src/chapter02/two_bernoulli_sampling.py
      md5: 4fd90b0d9980489944c94d9d50fffe60
      size: 3891
    - path: src/utils.py
      md5: 08908d6b0cc85d9d1565106989f226c5
      size: 1331
    outs:
    - path: models/chapter02/2/two_bernoulli.pickle
      md5: d0ef24da8f94c60b827f3f794de303df
      size: 5756836
    - path: models/chapter02/2/two_bernoulli_theta.npz
      md5: aab88ce1ec2e86221f82498aaada6066
      size: 19546
  chap02_two_bernoulli_sampling@3:
    cmd: poetry run python -m src.chapter02.two_bernoulli_sampling --model_output_filepath
      models/chapter02/3/two_bernoulli.pickle --theta_filepath models/chapter02/3/two_bernoulli_theta.npz
    deps:
    - path: src/chapter02/two_bernoulli_sampling.py
      md5: 4fd90b0d9980489944c94d9d50fffe60
      size: 3891
    - path: src/utils.py
      md5: 08908d6b0cc85d9d1565106989f226c5
      size: 1331
    outs:
    - path: models/chapter02/3/two_bernoulli.pickle
      md5: 995830208ea22150c97914735882237e
      size: 5756839
    - path: models/chapter02/3/two_bernoulli_theta.npz
      md5: 3ff62cf659e652d33ca6bdd117c10191
      size: 19546
  chap02_two_bernoulli_sampling@1:
    cmd: poetry run python -m src.chapter02.two_bernoulli_sampling --model_output_filepath
      models/chapter02/1/two_bernoulli.pickle --theta_filepath models/chapter02/1/two_bernoulli_theta.npz
    deps:
    - path: src/chapter02/two_bernoulli_sampling.py
      md5: 4fd90b0d9980489944c94d9d50fffe60
      size: 3891
    - path: src/utils.py
      md5: 08908d6b0cc85d9d1565106989f226c5
      size: 1331
    outs:
    - path: models/chapter02/1/two_bernoulli.pickle
      md5: da464fc2ae8aff4fa8cd0c8991d015c5
      size: 5756843
    - path: models/chapter02/1/two_bernoulli_theta.npz
      md5: 34cf611f1ca36b7b130519b3208f30a7
      size: 19546
  chap02_two_bernoulli_analysis@1:
    cmd: poetry run python -m src.chapter02.two_bernoulli_analysis models/chapter02/two_bernoulli_1.pickle
      models/chapter02/two_bernoulli_theta_1.npz data/processed/chapter02/two/1/ --figure_dir
      reports/figures/chapter02/two/1/
    deps:
    - path: models/chapter02/two_bernoulli_1.pickle
      md5: 04bfdc5edfee24ae854141048f7ca00d
      size: 5756836
    - path: models/chapter02/two_bernoulli_theta_1.npz
      md5: 847519ef3aa90719fd006a9eaeccb9f9
      size: 19546
    - path: src/chapter02/two_bernoulli_analysis.py
      md5: b2ebbd2d4d9d5fd438abc009995339e8
      size: 8852
    - path: src/utils.py
      md5: 08908d6b0cc85d9d1565106989f226c5
      size: 1331
    outs:
    - path: data/processed/chapter02/two/1/
      md5: ddaebf12588743947411e6f5d2460eaa.dir
      size: 18419
      nfiles: 2
    - path: reports/figures/chapter02/two/1/bernoulli.png
      md5: 59ba4cdb460381c154e019b1bb277964
      size: 165240
    - path: reports/figures/chapter02/two/1/trace.png
      md5: b002d9c73c4d75f7c715f1933959faec
      size: 178757
  chap02_two_bernoulli_sampling@0:
    cmd: poetry run python -m src.chapter02.two_bernoulli_sampling --model_output_filepath
      models/chapter02/0/two_bernoulli.pickle --theta_filepath models/chapter02/0/two_bernoulli_theta.npz
    deps:
    - path: src/chapter02/two_bernoulli_sampling.py
      md5: 4fd90b0d9980489944c94d9d50fffe60
      size: 3891
    - path: src/utils.py
      md5: 08908d6b0cc85d9d1565106989f226c5
      size: 1331
    outs:
    - path: models/chapter02/0/two_bernoulli.pickle
      md5: a65680a64a041ae79224e257e7c68c32
      size: 5756836
    - path: models/chapter02/0/two_bernoulli_theta.npz
      md5: 61400a101a98629e517dfa5eed94b915
      size: 19546
  chap02_two_bernoulli_sampling@4:
    cmd: poetry run python -m src.chapter02.two_bernoulli_sampling --model_output_filepath
      models/chapter02/4/two_bernoulli.pickle --theta_filepath models/chapter02/4/two_bernoulli_theta.npz
    deps:
    - path: src/chapter02/two_bernoulli_sampling.py
      md5: 4fd90b0d9980489944c94d9d50fffe60
      size: 3891
    - path: src/utils.py
      md5: 08908d6b0cc85d9d1565106989f226c5
      size: 1331
    outs:
    - path: models/chapter02/4/two_bernoulli.pickle
      md5: 226bc60d2d8037b35be80bf5d5ab35a4
      size: 5756836
    - path: models/chapter02/4/two_bernoulli_theta.npz
      md5: b030817e7d600ae7411a6e708e39da85
      size: 19546
  chap02_two_bernoulli_analysis@4:
    cmd: poetry run python -m src.chapter02.two_bernoulli_analysis models/chapter02/two_bernoulli_4.pickle
      models/chapter02/two_bernoulli_theta_4.npz data/processed/chapter02/two/4/ --figure_dir
      reports/figures/chapter02/two/4/
    deps:
    - path: models/chapter02/two_bernoulli_4.pickle
      md5: b6fa2c336d2f41d748befc08f9d00bdf
      size: 5756836
    - path: models/chapter02/two_bernoulli_theta_4.npz
      md5: da2aee1d4773ccfc750d2a03be23c279
      size: 19546
    - path: src/chapter02/two_bernoulli_analysis.py
      md5: b2ebbd2d4d9d5fd438abc009995339e8
      size: 8852
    - path: src/utils.py
      md5: 08908d6b0cc85d9d1565106989f226c5
      size: 1331
    outs:
    - path: data/processed/chapter02/two/4/
      md5: 57022e376a4054c38c0bbe7d898c5c3c.dir
      size: 18071
      nfiles: 2
    - path: reports/figures/chapter02/two/4/bernoulli.png
      md5: e353c412d97246cc8d2525ca7ddb3ecb
      size: 160741
    - path: reports/figures/chapter02/two/4/trace.png
      md5: bc49675ea00380ed2862292d1e4a1123
      size: 175825
  chap02_two_bernoulli_analysis@0:
    cmd: poetry run python -m src.chapter02.two_bernoulli_analysis models/chapter02/two_bernoulli_0.pickle
      models/chapter02/two_bernoulli_theta_0.npz data/processed/chapter02/two/0/ --figure_dir
      reports/figures/chapter02/two/0/
    deps:
    - path: models/chapter02/0/two_bernoulli.pickle
      md5: a65680a64a041ae79224e257e7c68c32
      size: 5756836
    - path: models/chapter02/0/two_bernoulli_theta.npz
      md5: 61400a101a98629e517dfa5eed94b915
      size: 19546
    - path: src/chapter02/two_bernoulli_analysis.py
      md5: 3005ed0fcfaed172d8b7a640849ee743
      size: 8869
    - path: src/utils.py
      md5: 08908d6b0cc85d9d1565106989f226c5
      size: 1331
    outs:
    - path: data/processed/chapter02/two/0/
      md5: 9a1cfc4c78a617008e8db806e6d2fbf9.dir
      size: 18445
      nfiles: 2
    - path: reports/figures/chapter02/two/0/bernoulli.png
      md5: 712b19c5f1a665326aeea0642abc992d
      size: 156648
    - path: reports/figures/chapter02/two/0/trace.png
      md5: 9459a080234be24ec65d9964e0a52271
      size: 175167
  chap02_two_bernoulli_analysis@2:
    cmd: poetry run python -m src.chapter02.two_bernoulli_analysis models/chapter02/two_bernoulli_2.pickle
      models/chapter02/two_bernoulli_theta_2.npz data/processed/chapter02/two/2/ --figure_dir
      reports/figures/chapter02/two/2/
    deps:
    - path: models/chapter02/two_bernoulli_2.pickle
      md5: 5657cb5f88597690925f50e2b8bb8871
      size: 5756836
    - path: models/chapter02/two_bernoulli_theta_2.npz
      md5: 3b07c59f4bedd631e6b6897823875916
      size: 19546
    - path: src/chapter02/two_bernoulli_analysis.py
      md5: b2ebbd2d4d9d5fd438abc009995339e8
      size: 8852
    - path: src/utils.py
      md5: 08908d6b0cc85d9d1565106989f226c5
      size: 1331
    outs:
    - path: data/processed/chapter02/two/2/
      md5: 39e0df513ac1680ae7258c990ab324e0.dir
      size: 18276
      nfiles: 2
    - path: reports/figures/chapter02/two/2/bernoulli.png
      md5: 0f27f6cdb94361e442044e91f1247419
      size: 163972
    - path: reports/figures/chapter02/two/2/trace.png
      md5: 1de46902d6220f095d311ddd0ef52702
      size: 182489
  chap02_two_bernoulli_analysis@3:
    cmd: poetry run python -m src.chapter02.two_bernoulli_analysis models/chapter02/two_bernoulli_3.pickle
      models/chapter02/two_bernoulli_theta_3.npz data/processed/chapter02/two/3/ --figure_dir
      reports/figures/chapter02/two/3/
    deps:
    - path: models/chapter02/3/two_bernoulli.pickle
      md5: 995830208ea22150c97914735882237e
      size: 5756839
    - path: models/chapter02/3/two_bernoulli_theta.npz
      md5: 3ff62cf659e652d33ca6bdd117c10191
      size: 19546
    - path: src/chapter02/two_bernoulli_analysis.py
      md5: 3005ed0fcfaed172d8b7a640849ee743
      size: 8869
    - path: src/utils.py
      md5: 08908d6b0cc85d9d1565106989f226c5
      size: 1331
    outs:
    - path: data/processed/chapter02/two/3/
      md5: a73547a29b1406b1ad0e69fd6ae4ec0b.dir
      size: 18198
      nfiles: 2
    - path: reports/figures/chapter02/two/3/bernoulli.png
      md5: ab186080b116b744275faf4957c34e49
      size: 163726
    - path: reports/figures/chapter02/two/3/trace.png
      md5: fd067d02d32fd8764bdf9188ff71c560
      size: 174358
